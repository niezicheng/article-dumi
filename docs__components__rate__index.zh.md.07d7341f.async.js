(self["webpackChunkdocs_dumi"]=self["webpackChunkdocs_dumi"]||[]).push([[2382],{44075:function(e,l,n){"use strict";n.r(l);var t=n(67294),a=n(96089),c=n(65659);n(45139);l["default"]=e=>(t.useEffect((()=>{var l;null!==e&&void 0!==e&&null!==(l=e.location)&&void 0!==l&&l.hash&&a.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),t.createElement(t.Fragment,null,t.createElement("div",{className:"markdown"},t.createElement("h2",{id:"rate-\u8bc4\u5206"},t.createElement(a.AnchorLink,{to:"#rate-\u8bc4\u5206","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Rate \u8bc4\u5206"),t.createElement("p",null,"\u8bc4\u5206"),t.createElement("h2",{id:"\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0"},t.createElement(a.AnchorLink,{to:"#\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0"),t.createElement("blockquote",null,t.createElement("p",null,"\u4e3b\u8981\u662f\u6784\u5efa",t.createElement("code",null,"\u503c-\u56fe"),"\u6807\u6620\u5c04\u6570\u7ec4\u4ee5\u53ca\u70b9\u51fb ",t.createElement("code",null,"handleChange")," \u4e8b\u4ef6\u5904\u7406")),t.createElement("ul",null,t.createElement("li",null,"\u6784\u5efa",t.createElement("code",null,"\u503c-\u56fe"),"\u6807\u6620\u5c04\u6570\u7ec4",t.createElement("ul",null,t.createElement("li",null,"values: ['unSelected', 'halfSelected', 'selected'] <=> iconType: ['\u672a\u9009\u4e2d\u56fe\u6807\u7c7b\u578b', '\u534a\u9009\u56fe\u6807\u7c7b\u578b', '\u5168\u9009\u56fe\u6807\u7c7b\u578b'] \u5bf9\u5e94\u6620\u5c04"),t.createElement("li",null,"\u5faa\u73af\u56fe\u6807\u603b\u6570 ",t.createElement("code",null,"total"),", \u6bd4\u8f83 ",t.createElement("code",null,"value")," \u5e76\u7ed3\u5408 ",t.createElement("code",null,"isHalf")," \u5904\u7406\u534a\u9009\u5f97\u51fa\u503c\u6570\u7ec4 ",t.createElement("code",null,"values")))),t.createElement("li",null,"\u70b9\u51fb ",t.createElement("code",null,"handleChange")," \u4e8b\u4ef6\u5904\u7406",t.createElement("ul",null,t.createElement("li",null,"\u5b9a\u4f4d\u5143\u7d20\u8986\u76d6\u56fe\u7247\u5de6\u53f3\u4e24\u90e8\u5206\uff0c\u5904\u7406\u534a\u9009\u60c5\u51b5\uff0c\u70b9\u51fb\u5de6\u8fb9\u90e8\u5206\u534a\u9009 ",t.createElement("code",null,"half: true"),"\uff0c\u53f3\u8fb9\u90e8\u5206\u5168\u9009 ",t.createElement("code",null,"half: false"),"\u3002"),t.createElement("li",null,"\u70b9\u51fb\u4e8b\u4ef6\u5185\u4f9d\u636e ",t.createElement("code",null,"isHalf")," \u548c ",t.createElement("code",null,"half")," \u5224\u65ad\u662f\u5426\u4e3a\u534a\u9009\uff0c\u662f\u534a\u9009 ",t.createElement("code",null,"value = ((index + 1) * 2 - 1)"),", \u4e0d\u662f\u4e0d\u505a\u5904\u7406\uff0c\u5c06 ",t.createElement("code",null,"value")," \u4f20\u9012\u7ed9\u5916\u90e8 ",t.createElement("code",null,"onChange")," \u56de\u8c03\u51fd\u6570\uff0c\u5185\u90e8\u5237\u884c ",t.createElement("code",null,"values")," \u6570\u636e")))),t.createElement("p",null,t.createElement("strong",null,"\u83b7\u53d6\u6620\u5c04\u6570\u7ec4:")),t.createElement(c.Z,{code:"// \u662f\u5426\u4e3a\u6574\u6570\nfunction isInteger(value) {\n  return /(^[1-9]\\d*$)/.test(value.toString());\n}\n\nconst mapValueArray = value => {\n  let arr = [];\n  for (let i = 0; i < total; i++) {\n    arr.push(i < value ? 'selected' : 'unSelected');\n  }\n\n  if (value > 0 && isInteger(value) && isHalf) {\n    array[value - 0.5] = 'halfSelected';\n  }\n};\n\n// \u5237\u884c\u6e32\u67d3\u65f6\u5faa\u73af\u6570\u7ec4\u6570\u636e\nfunction updateValues(value) {\n  // ['unSelected', 'unSelected', 'halfSelected', 'selected'] => 2.5\n  setValues(mapValueArray(value));\n}",lang:"tsx"}),t.createElement("p",null,t.createElement("strong",null,"handleChange \u5904\u7406\uff1a")),t.createElement(c.Z,{code:"const handleChange = (index, half) => {\n  const { disabled, isHalf, onChange } = props;\n\n  if (disabled) return;\n\n  if (isHalf && half) {\n    value = ((index + 1) * 2 - 1) / 2;\n  }\n\n  if (value === props.value) return;\n\n  onChange?.(value);\n\n  updateValues(value);\n};",lang:"tsx"}))))}}]);