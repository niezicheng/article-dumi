(self["webpackChunkdocs_dumi"]=self["webpackChunkdocs_dumi"]||[]).push([[9492],{14896:function(e,n,t){"use strict";t.r(n);var a=t(67294),l=t(96089),i=t(65659);t(45139);n["default"]=e=>(a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.createElement(a.Fragment,null,a.createElement("div",{className:"markdown"},a.createElement("h2",{id:"noticebar-\u901a\u544a\u680f"},a.createElement(l.AnchorLink,{to:"#noticebar-\u901a\u544a\u680f","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"NoticeBar \u901a\u544a\u680f"),a.createElement("p",null,"\u5728\u5bfc\u822a\u680f\u4e0b\u65b9\uff0c\u4e00\u822c\u7528\u4f5c\u7cfb\u7edf\u63d0\u9192\u3001\u6d3b\u52a8\u63d0\u9192\u7b49\u901a\u77e5"),a.createElement("h2",{id:"\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0"},a.createElement(l.AnchorLink,{to:"#\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u8bbe\u8ba1\u601d\u8def\u4e0e\u5b9e\u73b0"),a.createElement("blockquote",null,a.createElement("p",null,"\u4e3b\u8981\u662f\u5982\u4f55\u5b9e\u73b0\u52a8\u753b\u5faa\u73af\u8fc7\u7a0b")),a.createElement("ul",null,a.createElement("li",null,"\u5faa\u73af\u52a8\u753b\u5b9e\u73b0",a.createElement("ul",null,a.createElement("li",null,"\u83b7\u53d6\u5305\u88f9\u5bb9\u5668 ",a.createElement("code",null,"ScrollView")," \u5bbd\u5ea6 ",a.createElement("code",null,"scrollViewWidth"),"\uff0c\u5e76\u8bbe\u7f6e ",a.createElement("code",null,"horizontal")," \u652f\u6301\u6a2a\u5411\u6eda\u52a8"),a.createElement("li",null,"\u83b7\u53d6\u5c55\u793a\u6587\u672c\u5bb9\u5668 ",a.createElement("code",null,"Animated.Text")," \u5bbd\u5ea6 ",a.createElement("code",null,"textWidth")),a.createElement("li",null,"\u5c06\u52a8\u753b\u5c5e\u6027\u503c ",a.createElement("code",null,"animatedTransformX")," \u8d4b\u503c\u7ed9 ",a.createElement("code",null,"Animated.Text")," \u6837\u5f0f ",a.createElement("code",null,"translateX")," \u5c5e\u6027"),a.createElement("li",null,"\u6dfb\u52a0\u5faa\u73af\u52a8\u753b\u64cd\u4f5c\uff08\u8be6\u7ec6\u89c1\u4e0b\u9762\u8bf4\u660e\uff09")))),a.createElement("h3",{id:"rn-\u52a8\u753b\u5b9e\u73b0"},a.createElement(l.AnchorLink,{to:"#rn-\u52a8\u753b\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"RN \u52a8\u753b\u5b9e\u73b0"),a.createElement(i.Z,{code:"const animation =\n  // \u52a8\u753b\u5faa\u73af\n  Animated.loop(\n    // \u52a8\u753b\u6267\u884c\u961f\u5217\n    Animated.sequence([\n      Animated.timing(animatedTransformX, {\n        // \u4ece 0 -> -textWidth\n        toValue: -textWidth,\n        // \u52a8\u753b\u4e8b\u4ef6\n        duration: (textWidth / 40) * 1000,\n        useNativeDriver: true,\n        // \u52a8\u753b\u6267\u884c\u51fd\u6570\n        easing: Easing.linear,\n      }),\n      Animated.timing(animatedTransformX, {\n        toValue: scrollViewWidth,\n        duration: 0,\n        useNativeDriver: true,\n        easing: Easing.linear,\n      }),\n      Animated.timing(animatedTransformX, {\n        toValue: 0,\n        duration: (scrollViewWidth / 40) * 1000,\n        useNativeDriver: true,\n        easing: Easing.linear,\n      }),\n    ]),\n  );\n// \u52a8\u753b\u5f00\u59cb\nanimation.start();",lang:"tsx"}),a.createElement("h3",{id:"\u5c0f\u7a0b\u5e8f\u52a8\u753b\u5b9e\u73b0\u4e0d\u540c\u5c0f\u7a0b\u5e8f\u7cfb\u5217-api-\u8bed\u6cd5\u4e0d\u4e00\u6837"},a.createElement(l.AnchorLink,{to:"#\u5c0f\u7a0b\u5e8f\u52a8\u753b\u5b9e\u73b0\u4e0d\u540c\u5c0f\u7a0b\u5e8f\u7cfb\u5217-api-\u8bed\u6cd5\u4e0d\u4e00\u6837","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u5c0f\u7a0b\u5e8f\u52a8\u753b\u5b9e\u73b0(\u4e0d\u540c\u5c0f\u7a0b\u5e8f\u7cfb\u5217 API \u8bed\u6cd5\u4e0d\u4e00\u6837)"),a.createElement("ul",null,a.createElement("li",null,"\u5c06\u52a8\u753b\u5bfc\u51fa\u503c ",a.createElement("code",null,"animationData")," \u8d4b\u503c\u7ed9\u5143\u7d20 ",a.createElement("code",null,"animation")," \u5c5e\u6027")),a.createElement(i.Z,{code:"/**\n * \u52a8\u753b\u521d\u59cb\u5316\n */\ninitAnimation() {\n  wx.createSelectorQuery()\n    .in(this)\n    .select('.content-wrap')\n    .boundingClientRect((wrapRect) => {\n      wx.createSelectorQuery()\n        .in(this)\n        .select('.content')\n        .boundingClientRect((rect) => {\n          const duration = (rect.width / 40) * this.data.speed;\n          // \u521b\u5efa\u52a8\u753b\u5bf9\u8c61\n          const animation = wx.createAnimation({\n            duration,\n            timingFunction: 'linear',\n          });\n          this.setData(\n            {\n              wrapWidth: wrapRect.width, // \u5bb9\u5668\u6846\u5ea6\n              width: rect.width, // \u5185\u5bb9\u5bbd\u5ea6\n              duration, // \u52a8\u753b\u5ef6\u8fdf\u65f6\u95f4\n              animation, // \u52a8\u753b\u5bf9\u8c61\n            },\n            () => {\n              this.startAnimation(); // \u5f00\u59cb\u52a8\u753b\n            }\n          );\n        })\n        .exec();\n    })\n    .exec();\n},\n\n/**\n * \u5f00\u59cb\u52a8\u753b\n */\nstartAnimation() {\n  const { animation, wrapWidth, duration, width } = this.data;\n  animation.option.transition.duration = duration;\n  // step1: 0 -> -width\n  const animationData = animation.translateX(-width).step();\n  setTimeout(() => {\n    this.setData({\n      // \u52a8\u753b\u503c\u5bfc\u51fa\u6267\u884c\n      animationData: animationData.export(),\n    });\n  }, 100);\n\n  // after duration reset\n  const timer = setTimeout(() => {\n    if (animation.option.transition.duration !== 0) {\n      // \u8bbe\u7f6e\u52a8\u753b\u6267\u884c\u65f6\u957f\u4e3a 0\n      animation.option.transition.duration = 0;\n      // step2: -width -> wrapWidth\n      const resetAnimation = animation.translateX(wrapWidth).step();\n      this.setData({\n        animationData: resetAnimation.export(),\n      });\n    }\n\n    // \u52a8\u753b\u5faa\u73af\u8c03\u7528\n    this.startAnimation();\n  }, duration);\n\n  this.setData({\n    timer,\n  });\n},\n\n/**\n * \u6e05\u9664\u52a8\u753b\u5b9a\u65f6\u5668\n */\ndestroyTimer() {\n  const { timer } = this.data;\n  if (timer) {\n    clearTimeout(timer);\n  }\n}",lang:"js"}),a.createElement("p",null,a.createElement("strong",null,"\u8bf4\u660e:"),"\u4e0d\u540c\u5c0f\u7a0b\u5e8f\u5e73\u53f0\u4e4b\u524d Api \u4f7f\u7528\u7684\u5dee\u5f02, ",a.createElement("code",null,"target")," \u8868\u793a\u76f8\u5e94\u5e73\u53f0"),a.createElement("ul",null,a.createElement("li",null,"[target].createSelectorQuery()")),a.createElement("p",null,"\u8fd4\u56de\u503c ",a.createElement("code",null,"SelectorQuery")," \u4e2d\u963f\u91cc\u7cfb\u5c0f\u7a0b\u5e8f\u4e0d\u542b ",a.createElement("code",null,"in")," \u65b9\u6cd5, \u4e0d\u7528\u66f4\u6539\u9009\u62e9\u5668\u9009\u53d6\u7684\u8303\u56f4"),a.createElement("blockquote",null,a.createElement("p",null,a.createElement("code",null,"SelectorQuery.in(component: Component)")," \u5c06\u9009\u62e9\u5668\u7684\u9009\u53d6\u8303\u56f4\u66f4\u6539\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6 component \u5185\u3002\uff08\u521d\u59cb\u65f6\uff0c\u9009\u62e9\u5668\u4ec5\u9009\u53d6\u9875\u9762\u8303\u56f4\u7684\u8282\u70b9\uff0c\u4e0d\u4f1a\u9009\u53d6\u4efb\u4f55\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e2d\u7684\u8282\u70b9\uff09\u3002")),a.createElement("ul",null,a.createElement("li",null,"[target].createAnimation(option: ","{"," duration ","}",")")),a.createElement("p",null,"\u8fd4\u56de\u503c ",a.createElement("code",null,"animation")," \u83b7\u53d6\u548c\u66f4\u6539 ",a.createElement("code",null,"option")," \u5bf9\u8c61\u5c5e\u6027"),a.createElement("blockquote",null,a.createElement("ul",null,a.createElement("li",null,"\u5fae\u4fe1: animation.option.transition.duration"),a.createElement("li",null,"\u963f\u91cc\u7cfb: animation.config.duration"),a.createElement("li",null,"\u5b57\u8282: animation.option.duration"))),a.createElement("ul",null,a.createElement("li",null,"[target].boundingClientRect([callback])")),a.createElement("p",null,"\u56de\u8c03\u51fd\u6570 ",a.createElement("code",null,"callback")," \u963f\u91cc\u7cfb\u5c0f\u7a0b\u5e8f\u4e2d\u6ca1\u6709\u56de\u8c03\u51fd\u6570\uff0c\u56de\u8c03\u51fd\u6570\u5728 ",a.createElement("code",null,"exec")," \u6267\u884c\u51fd\u6570\u4e2d\u8c03\u7528\u3002"))))}}]);