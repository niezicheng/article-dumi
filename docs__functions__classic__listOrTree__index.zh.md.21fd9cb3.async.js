(self["webpackChunkdocs_dumi"]=self["webpackChunkdocs_dumi"]||[]).push([[10],{50752:function(e,n,t){"use strict";t.r(n);var a=t(67294),i=t(96089),l=t(65659);t(45139);n["default"]=e=>(a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&i.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.createElement(a.Fragment,null,a.createElement("div",{className:"markdown"},a.createElement("h2",{id:"list-\u4e0e-tree-\u6570\u636e\u76f8\u4e92\u8f6c\u5316"},a.createElement(i.AnchorLink,{to:"#list-\u4e0e-tree-\u6570\u636e\u76f8\u4e92\u8f6c\u5316","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"list \u4e0e tree \u6570\u636e\u76f8\u4e92\u8f6c\u5316"),a.createElement("h3",{id:"\u57fa\u7840\u7ed3\u6784"},a.createElement(i.AnchorLink,{to:"#\u57fa\u7840\u7ed3\u6784","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u57fa\u7840\u7ed3\u6784"),a.createElement("h4",{id:"list-\u6570\u636e\u7ed3\u6784"},a.createElement(i.AnchorLink,{to:"#list-\u6570\u636e\u7ed3\u6784","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"list \u6570\u636e\u7ed3\u6784"),a.createElement(l.Z,{code:"type TListItem = {\n  id: number;\n  title: string;\n  pid?: number;\n  pTitle?: string;\n};\n\ntype TListData = Array<TListItem>;",lang:"ts"}),a.createElement("h4",{id:"tree-\u6570\u636e\u7ed3\u6784"},a.createElement(i.AnchorLink,{to:"#tree-\u6570\u636e\u7ed3\u6784","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"tree \u6570\u636e\u7ed3\u6784"),a.createElement(l.Z,{code:"type TTreeItem = {\n  id: number;\n  title: string;\n  children?: TTreeItem[];\n};\n\ntype TTreeData = Array<TTreeItem>;",lang:"ts"}),a.createElement("h3",{id:"list-\u8f6c-tree"},a.createElement(i.AnchorLink,{to:"#list-\u8f6c-tree","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"list \u8f6c tree"),a.createElement("h3",{id:"\u9012\u5f52"},a.createElement(i.AnchorLink,{to:"#\u9012\u5f52","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u9012\u5f52"),a.createElement("h3",{id:"\u53cc\u5c42\u5faa\u73af"},a.createElement(i.AnchorLink,{to:"#\u53cc\u5c42\u5faa\u73af","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"\u53cc\u5c42\u5faa\u73af"),a.createElement("h4",{id:"map-\u5b58\u50a8"},a.createElement(i.AnchorLink,{to:"#map-\u5b58\u50a8","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"map \u5b58\u50a8"),a.createElement(l.Z,{code:"type TOptions = {\n  labelKey?: string;\n  valueKey?: string;\n  pLabelKey?: string;\n  pValueKey?: string;\n  // \u662f\u5426\u63d0\u53d6\u7236\u5bf9\u8c61\u4fe1\u606f\u5e76\u5165\u6e90\u6570\u636e\u4e2d\n  isFetchParent?: string;\n};\n\nconst defaultOptions = {\n  labelKey = 'title',\n  valueKey = 'id',\n  pLabelKey = 'pTitle',\n  pValueKey = 'pid',\n  isFetchParent = false,\n};\n\n/**\n * @param list \u6e90\u6570\u636e\n * @param options \u6570\u636e\u914d\u7f6e\u9009\u9879\n */\nconst list2tree = (list, options = defaultOptions) => {\n  const { labelKey, valueKey, pLabelKey, pValueKey, isFetchParent } = options;\n  const [map, treeData] = [{}, []];\n\n  // \u83b7\u53d6\u7236\u5143\u7d20\u5bf9\u8c61\u5e76\u52a0\u5165\u6e90\u6570\u636e list\n  if (isFetchParent) {\n    const map2 = {};\n    const length = list.length;\n    for (let i = 0; i < length; i += 1) {\n      if (!map2[list[i][pValueKey]]) {\n        map2[list[i][pValueKey]] = true;\n        const parentData = {\n          value: list[i][pValueKey],\n          label: list[i][pLabelKey],\n        };\n        parentData[valueKey] = list[i][pValueKey];\n        parentData[labelKey] = list[i][pLabelKey];\n        list.push(parentData);\n      }\n    }\n  }\n\n  // \u5faa\u73af list \u9879\u52a0\u5165 map \u5bf9\u8c61\u5e76\u6dfb\u52a0 children\u3010map \u5b58\u50a8\u4e3a\u5f53\u524d\u5143\u7d20\u7d22\u5f15\u3011\n  for (let i = 0; i < list.length; i += 1) {\n    map[list[i][valueKey]] = i;\n    list[i].children = [];\n  }\n\n  for (let i = 0; i < list.length; i += 1) {\n    const node = list[i];\n    // \u5b58\u5728\u7236\u5143\u7d20\u3010pValueKey \u5b58\u5728\u3011\uff0c\u5e76\u4e14\u5728\u7236\u5bf9\u8c61\u5728 list \u4e2d\u3010\u5b58\u5728 map\u3011\n    if (node[pValueKey] && list[map[node[pValueKey]]]) {\n      // \u5c06\u5f53\u524d\u5143\u7d20\u52a0\u5165\u7236\u5143\u7d20 children \u4e2d\n      list[map[node[pValueKey]]].children.push({\n        ...node,\n        label: node[labelKey],\n        value: node[valueKey],\n      });\n    } else {\n      // \u4e0d\u5b58\u5728\u7236\u5143\u7d20\u3010\u5373\u6839\u5143\u7d20\u3011\u52a0\u5165\u8f93\u51fa\u6570\u7ec4\u4e2d\n      treeData.push(node);\n    }\n  }\n  return treeData;\n};\n\n// \u793a\u4f8b\nconst listData = [\n  {\n    cateId: 'p1-1',\n    parentId: 'p1',\n    pTitle: 'P\u5e7f\u5dde',\n    title: '\u5e7f\u5dde',\n  },\n  {\n    cateId: 'p1-2',\n    parentId: 'p1',\n    pTitle: 'P\u6df1\u5733',\n    title: '\u6df1\u5733',\n  },\n  {\n    cateId: 'p2-1',\n    parentId: 'p2',\n    title: '\u6210\u90fd',\n    pTitle: 'P\u6210\u90fd',\n  },\n  {\n    cateId: 'p2-2',\n    parentId: 'p2',\n    title: '\u5fb7\u9633',\n    pTitle: 'P',\n  },\n];\n\nconst options = {\n  labelKey: 'title',\n  valueKey: 'cateId',\n  pLabelKey: 'pTitle',\n  pValueKey: 'parentId',\n  isFetchParent: true,\n};\n\nconsole.log(list2tree(listData, options));",lang:"ts"}),a.createElement("h3",{id:"tree-\u8f6c-list"},a.createElement(i.AnchorLink,{to:"#tree-\u8f6c-list","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"tree \u8f6c list"))))}}]);